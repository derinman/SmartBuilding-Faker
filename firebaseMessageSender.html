<!DOCTYPE html>
<html>
<head>

</head>

<body>

<p>firebaseMessageSender</p>
<form onsubmit="return addMessage(this)">
    <label for="id">id</label><br>
    <input name="id" value="伊閩"><br>
    <label for="status">status</label><br>
    <input type="radio" id="status" name="status" value="0" checked>
    <label for="status">僅為誤報</label>
    <input type="radio" id="status" name="status" value="1" >
    <label for="status">確認危險</label><br>
    <br>
    <input type="submit" value="Add item">
    <input type="button" value="Show list" onclick="console.log(message)">
</form>

<button onclick="testMessageSender()">發送意外人員回報</button>

<script>

    var message= {}
    function addMessage(form) {
        message = {             
            id:form.id.value,
            status:form.status.value,
        };
    return false;
    }

    function testMessageSender(){fetch('https://fcm.googleapis.com/fcm/send', {
            'method': 'POST',
            'headers': {
                    'Authorization': 'key=AAAAK0Qb0Ok:APA91bEn4pe-h4XKOo3pMP3ll9E4MBSDX9DSGTVIwMRrII8cOKZlXZ3M7OD-rpi7cwvif4eUbZWoFSW2NOpnulPYG2IfuUsoVspMO-lBYI9drQ3fd4CstpC03N16JWLCEYDOW7SqgBkq',
                    'Content-Type': 'application/json'
                },
            'body': JSON.stringify({
                    "data":{
                        "message": message,
                    },
                    "to":"dgd5QBGk5AYMpe-qTUuGQ8:APA91bEliFJCDcxozl_O7PsVywLG8LFR5-Y7_FhJxiP7OkISHvIc5ac9olq2KdcfYamnPCa2-OZynlT8NkNT0j08Gob1E95lksmF2vXRJ8ahzTl46cER7v2kqUBiQf2RMlJfo7seGaZV"
            })
            }).then(function(response) {
                console.log(response);
            }).catch(function(error) {
                alert(error)});}

</script>

</body>
</html>